<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>reformed</title>
	<link rel="stylesheet" type="text/css" href="reformed.css" />
</head>
<body>
<a href="http://github.com/BigBlueHat/reformed"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
<h1>re:form.ed by <a href="http://www.bigbluehat.com/">Big<em>Blue</em>Hat</a>
    <span class="download">
      <a href="http://github.com/BigBlueHat/reformed/zipball/master">
        <img border="0" width="70" src="http://github.com/images/modules/download/zip.png" /></a>
      <a href="http://github.com/BigBlueHat/reformed/tarball/master">
        <img border="0" width="70" src="http://github.com/images/modules/download/tar.png" /></a>
    </span>
</h1>
<h5>converting JSON into an HTML Form and back</h5>

<div style="overflow:hidden">
<div class="left">
  <nav class="examples">
    <li><a class="load-json" href="../../example">Example JSON</a></li>
    <li><a class="load-json" href="schemas/card.json">Card Schema</a></li>
    <li><a class="load-json" href="schemas/calendar.json">Calendar Schema</a></li>
  </nav>
  <textarea id="input"></textarea>

	<div class="buttons">
				re:form for
	<input type="button" value="JSON editing" id="reformforjson" />
	<input type="button" value="data entry" id="reformfordataentry" />
	<input type="button" value="data entry (schema)" id="reformforschemadataentry" />
	<input type="button" value="pretty the JSON" id="prettythis" />
	</div>
</div>
<div class="right">
	<textarea id="output">

	</textarea>

	<div class="buttons">
	<input type="button" value="re:JSON the form below" id="jsonthis" />
	</div>
</div>
</div>

<form id="reformed">

</form>


<!-- sample JSON serialization in HTML -->
	<form id="formed" style="display:none">
		<div class="kvp">
			<input type="text" value="name" />
			<input type="text" value="Benjamin Young" />
		</div>
		<div class="kvp">
			<input type="text" value="location" />
			<fieldset class="object">
				<div class="kvp">
					<input type="text" name="" value="name" />
					<input type="text" name="" value="Greenville, South Carolina" />
				</div>
			</fieldset>
		</div>
		<div class="kvp">
			<input type="text" value="work" />
			<fieldset class="array"><!-- array -->
				<fieldset class="object"><!-- object -->
					<div class="kvp">
						<input type="text" value="employer" />
						<fieldset class="object"><!-- object -->
							<div class="kvp">
								<input type="text" value="id" />
								<input type="text" value="111737955518707" />
							</div>
							<div class="kvp">
								<input type="text" value="name" />
								<input type="text" value="BigBlueHat" />
							</div>
						</fieldset>
					</div>
					<div class="kvp">
						<input type="text" value="start_date" />
						<input type="text" value="2003-07" />
					</div>
				</fieldset>
				<fieldset class="object"><!-- object -->
					<div class="kvp">
						<input type="text" value="employer" />
						<fieldset class="object"><!-- object -->
							<div class="kvp">
								<input type="text" value="id" />
								<input type="text" value="123" />
							</div>
							<div class="kvp">
								<input type="text" value="name" />
								<input type="text" value="Other Employer" />
							</div>
						</fieldset><!-- end object -->
					</div>
				</fieldset><!-- end object -->
			</fieldset><!-- end array -->
		</div>
		<div class="kvp">
			<input type="text" value="meeting_for" />
			<fieldset class="array"><!-- array -->
				<input type="text" value="Friendship" />
				<input type="text" value="Networking" />
			</fieldset>
		</div>
	</form>

	<script type="text/javascript" src="js/jquery.1.4.2.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script>
	<script type="text/javascript" src="js/jquery.hotkeys.js"></script>
	<script type="text/javascript" src="js/jquery.reformed.js"></script>
	<script type="text/javascript">
  (function($) {
    $.getJSON('../../default', function(data) {
      var pretty = JSON.stringify(data, null, '\t');
      $('#input').val(pretty);
    });
    // JSON loaders
    $('.load-json').each(function(i, el) {
      $(el).click(function(ev) {
        ev.preventDefault();
        $.get($(ev.target).attr('href'),function(data) { $('#input').val(data); },
              'text');
      });
    });

    // re:form-ers
		$('#reformforjson').click(function() {
			$('#reformed').reform($('#input').val(), {'editor':'edit'});
		});

		$('#reformforschemadataentry').click(function() {
			$('#reformed').reform($('#input').val(), {'editor':'schema'});
		});

		$('#reformfordataentry').click(function() {
			$('#reformed').reform($('#input').val(), {'editor':'data'});
		});

		$('#jsonthis').click(function() {
			$('#output').val($.rejson('#reformed'));
		});

		// clean up the JSON code
		$('#prettythis').click(function() {
			$('#input').val(JSON.stringify($.parseJSON($('#input').val()), null, '\t'));
		});

		// synchronized scrolling of before & after
		$('#input').scroll(function() {
		    $('#output')
		    .scrollTop($('#input').scrollTop());
		});

		$('#output').scroll(function() {
		    $('#input')
		    .scrollTop($('#output').scrollTop());
		});
	})(jQuery);
	</script>
</body>
</html>
